# pl-relax-element

The `pl-relax-element.py` file is handles everything relating to the relax element in PrairieLearn. It renders the RelaX editor in the PrairieLearn window, it calls the functions to generate the question text, and it calls the functions to grade a relational algebra questions.


## RelaXElementSharedLibrary

This directory contains the question's generation and grading scripts. More information can be found in the directory's respective `README.md`.  

## pl-relax-element.py

### generate(element_html, data)

The generate function is normally used to generate the correct answer for dynamic questions in PrairieLearn, however due to our approach to question generation we cannot modify the necessary data keys in generate. As such, the generate function is unused, instead the question is generated within the prepare function.  


### prepare(element_html, data)

The prepare function is responsible for creating and preparing the question. It obtains the necessary parameters from the question's HTML file.  
If the question is a static question, then this function obtains the solution and the path to the question's DatabaseFile from the question's HTML file. The specified txt file is read and then loaded into data. The question's solution is also loaded into data.
If the question is a random question, all the necessary parameters are obtained from the question's HTML file. If a parameter is unspecified, then a default value is used. All these parameters are loaded into data then the random question is generated by calling `autogen.autogenerate(data)` - imported from `RelaXElementSharedLibrary.RelaXAutogenerator`.  
This function returns nothing. All necessary information is stored and will be referenced from data.  


### render(element_html, data)

The render function is called when the page is loaded and renders the RelaX element.  
The function obtains the necessary parameters from data, reads the mustache files, and places the parameters into the mustache file. The HTML string of the mustache with inserted parameters is returned and rendered.  


### parse(element_html, data)

This function is unused for the RelaX element. It would normally be used to adjust the student's submitted answer, if necessary.  


### grade(element_html, data)

The grade function grades the student's answer and places their score into data.  
This function calls `grader.customGrader(data)` - imported from ` RelaXElementSharedLibrary.RelaXCustomGrader` - to grade the student's submission. It then places the returned score into the data variable. Feedback from the student's submission is placed into data within the custom grader.  


### test(element_html, data)

This function is unused for the RelaX element. It would normally be used to run test submissions through PrairieLearn.  
Instead of the test function, this project used DroneCI and Python unittests to test the RelaX element.  